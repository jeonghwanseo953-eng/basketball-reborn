<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RE:BORN 3íŒ€ ë†êµ¬ ê¸°ë¡ ì‹œìŠ¤í…œ</title>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&family=Noto+Sans+KR:wght@400;500;700&display=swap');

  body {
    font-family: 'Noto Sans KR', sans-serif;
    background: #f9fafb;
    margin: 0;
    padding: 15px;
    color: #222;
  }

  h1 {
    text-align: center;
    font-family: 'Orbitron', sans-serif;
    font-size: 2em;
    margin-bottom: 25px;
  }

  .tabs {
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
    margin-bottom: 20px;
  }

  .tab-btn {
    padding: 12px 24px;
    border-radius: 10px;
    border: none;
    background: #e9ecef;
    font-size: 16px;
    font-weight: 700;
    cursor: pointer;
  }

  .tab-btn.active {
    background: #007bff;
    color: white;
  }

  .team-container {
    display: grid;
    grid-template-columns: repeat(3,1fr);
    gap: 20px;
  }

  .team {
    background: #fff;
    padding: 18px;
    border-radius: 14px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  }

  .team h2 {
    text-align: center;
    padding: 10px 0;
    font-size: 1.4em;
    color: #fff;
    border-radius: 8px;
    margin-bottom: 10px;
  }

  .ë ˆë“œ h2 { background:#d62828; }
  .í™”ì´íŠ¸ h2 { background:#adb5bd; }
  .ë¸”ë™ h2 { background:#343a40; }

  li {
    list-style:none;
    background:#f1f3f5;
    margin:6px 0;
    padding:8px 12px;
    border-radius:8px;
    font-size:1.1em;
    font-weight:600;
  }

  /* ======= í…Œì´ë¸” ======= */
  table {
    width:100%;
    border-collapse:collapse;
    background:#fff;
    border-radius:12px;
    font-size:16px;
    overflow:hidden;
  }

  th, td {
    padding:10px;
    text-align:center;
    border-bottom:1px solid #dee2e6;
    font-size:1.05em;
  }

  th {
    background:#e9ecef;
    font-size:1.1em;
    font-weight:700;
  }

  td.player-name {
    font-weight:800;
    font-size:17px;
  }

  td span {
    font-size:16px;
    font-weight:700;
  }

  /* ë²„íŠ¼ í¬ê¸° ì¦ê°€ */
  .plus, .minus {
    border:none;
    border-radius:8px;
    padding:8px 14px;
    margin:3px;
    font-size:14px;
    font-weight:700;
    cursor:pointer;
  }

  .plus { background:#28a745; color:#fff; }
  .minus { background:#dc3545; color:#fff; }
  .plus3 { background:#007bff !important; }

  /* ê²½ê¸° ë ˆì´ì•„ì›ƒ */
  #matchArea {
    margin-top:20px;
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:20px;
  }

  .scoreboard {
    display:flex;
    justify-content: space-around;
    align-items:center;
    background:#fff;
    padding:15px;
    border-radius:12px;
    margin-top:20px;
    box-shadow:0 2px 8px rgba(0,0,0,0.1);
  }

  .score {
    font-size:2em;
    font-weight:800;
    color:#007bff;
  }

  .save-btn {
    padding:12px 20px;
    border-radius:10px;
    background:#007bff;
    color:#fff;
    border:none;
    font-weight:800;
    cursor:pointer;
    font-size:16px;
  }
</style>
</head>
<body>

<h1>RE:BORN ë†êµ¬ ê¸°ë¡ì§€ ğŸ€</h1>

<p style="text-align:center; font-size:15px; color:#555; margin-top:-10px;">
  ğŸ“… 2025ë…„ 11ì›” 25ì¼ ê²½ê¸° ê¸°ë¡
</p>

<div class="tabs">
  <button class="tab-btn active" onclick="showTab('teamTab', this)">íŒ€ / ì„ ìˆ˜ì •ë³´</button>
  <button class="tab-btn" onclick="showTab('gameTab', this)">ê²½ê¸° ê¸°ë¡</button>
</div>

<!-- íŒ€ ì •ë³´ -->
<div id="teamTab" class="tab-content active">
  <div class="team-container">

    <!-- ë ˆë“œ -->
    <div class="team ë ˆë“œ">
      <h2>ë ˆë“œ íŒ€</h2>
      <ul>
        <li>ê¹€ì„±í˜¸</li>
        <li>ê¹€ì°½ìˆ˜</li>
        <li>ì„œì •í™˜</li>
        <li>ì˜¤ë¯¼í˜•</li>
        <li>ì„ë¬¸ê·œ</li>
        <li>í•œê²½ì›</li>
      </ul>
    </div>

    <!-- í™”ì´íŠ¸ -->
    <div class="team í™”ì´íŠ¸">
      <h2>í™”ì´íŠ¸ íŒ€</h2>
      <ul>
        <li>ê¶Œìš©</li>
        <li>ì„œìœ¤ì„œ</li>
        <li>í•œì„</li>
        <li>í™í†µì¹˜</li>
        <li>í™©ì§€í™˜</li>
      </ul>
    </div>

    <!-- ë¸”ë™ -->
    <div class="team ë¸”ë™">
      <h2>ë¸”ë™ íŒ€</h2>
      <ul>
        <li>ê°•ì¸êµ¬</li>
        <li>ê°•ì§€ë¬¸</li>
        <li>ë°•ë¥˜ì°¬</li>
        <li>ì„œë¯¼ê· </li>
        <li>ì „ì„±í›ˆ</li>
      </ul>
    </div>

  </div>
</div>

<!-- ê²½ê¸°ê¸°ë¡ -->
<div id="gameTab" class="tab-content">

  <center>
    <select id="matchSelect" onchange="loadMatch()">
      <option value="">-- ê²½ê¸°ë¥¼ ì„ íƒí•˜ì„¸ìš” --</option>
      <option value="game1">ë ˆë“œ vs í™”ì´íŠ¸</option>
      <option value="game2">í™”ì´íŠ¸ vs ë¸”ë™</option>
      <option value="game3">ë¸”ë™ vs ë ˆë“œ</option>
    </select>
  </center>

  <div class="scoreboard" id="scoreboard" style="display:none;">
    <div>
      <h3 id="teamA_name">TEAM A</h3>
      <div class="score" id="teamA_score">0</div>
    </div>
    <div><h3>VS</h3></div>
    <div>
      <h3 id="teamB_name">TEAM B</h3>
      <div class="score" id="teamB_score">0</div>
    </div>
  </div>

  <div id="matchArea"></div>

  <div style="text-align:center; margin-top:25px;">
    <button class="save-btn" onclick="exportCSV()">ğŸ“¤ CSV ì €ì¥</button>
    <button class="save-btn" style="background:#dc3545;" onclick="resetStats()">ğŸ—‘ ì´ˆê¸°í™”</button>
  </div>

</div>

<script>
/* íŒ€ êµ¬ì„± */
const teams = {
  ë ˆë“œ: ["ê¹€ì„±í˜¸","ê¹€ì°½ìˆ˜","ì„œì •í™˜","ì˜¤ë¯¼í˜•","ì„ë¬¸ê·œ","í•œê²½ì›"],
  í™”ì´íŠ¸: ["ê¶Œìš©","ì„œìœ¤ì„œ","í•œì„","í™í†µì¹˜","í™©ì§€í™˜"],
  ë¸”ë™: ["ê°•ì¸êµ¬","ê°•ì§€ë¬¸","ë°•ë¥˜ì°¬","ì„œë¯¼ê· ","ì „ì„±í›ˆ"]
};

/* ë§¤ì¹˜ì—… */
const matchups = {
  game1:["ë ˆë“œ","í™”ì´íŠ¸"],
  game2:["í™”ì´íŠ¸","ë¸”ë™"],
  game3:["ë¸”ë™","ë ˆë“œ"]
};

let currentMatch = "";

/* íƒ­ */
function showTab(id, btn){
  document.querySelectorAll(".tab-content").forEach(t=>t.classList.remove("active"));
  document.querySelectorAll(".tab-btn").forEach(b=>b.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  btn.classList.add("active");
}

/* ê²½ê¸° ë¡œë“œ */
function loadMatch(){
  currentMatch = document.getElementById("matchSelect").value;
  const area = document.getElementById("matchArea");
  const board = document.getElementById("scoreboard");
  area.innerHTML = "";

  if(!currentMatch){ board.style.display="none"; return; }

  const [A,B] = matchups[currentMatch];
  document.getElementById("teamA_name").textContent = A;
  document.getElementById("teamB_name").textContent = B;
  board.style.display = "flex";

  area.appendChild(createTeamTable(A));
  area.appendChild(createTeamTable(B));

  loadStats();
  updateScores();
}

/* í…Œì´ë¸” ìƒì„± â€“ ìŠ¤íƒ¯ 4ê°œ */
function createTeamTable(teamKey){
  const div = document.createElement("div");
  div.className = "team";

  const table = document.createElement("table");
  const header = table.insertRow();

  ["ì„ ìˆ˜","ë“ì ","ë¦¬ë°”","ì–´ì‹œ","íŒŒìš¸"].forEach(t=>{
    const th = document.createElement("th");
    th.textContent = t;
    header.appendChild(th);
  });

  teams[teamKey].forEach(name=>{
    const row = table.insertRow();

    const nameCell = row.insertCell();
    nameCell.textContent = name;
    nameCell.classList.add("player-name");

    /* ìŠ¤íƒ¯ index: 0~3 */
    for(let i=0;i<4;i++){
      const cell = row.insertCell();
      const span = document.createElement("span");
      span.textContent = "0";
      span.id = `${currentMatch}_${teamKey}_${name}_${i}`;
      cell.appendChild(span);
      cell.appendChild(document.createElement("br"));

      if(i===0){ /* ë“ì  */
        cell.appendChild(makeBtn("+2",()=>change(span,2)));
        cell.appendChild(makeBtn("+3",()=>change(span,3)));
        cell.appendChild(makeBtn("-1",()=>change(span,-1)));
      } else {
        cell.appendChild(makeBtn("+",()=>change(span,1)));
        cell.appendChild(makeBtn("-",()=>change(span,-1)));
      }
    }
  });

  div.appendChild(table);
  return div;
}

function makeBtn(text, fn){
  const b=document.createElement("button");
  b.textContent=text;
  b.className = text.includes("-")?"minus":"plus";
  if(text==="+3") b.classList.add("plus3");
  b.onclick=fn;
  return b;
}

function change(el,val){
  let num = parseInt(el.textContent);
  num = Math.max(0, num + val);
  el.textContent = num;
  saveStats();
  updateScores();
}

function saveStats(){
  if(!currentMatch) return;
  let store = JSON.parse(localStorage.getItem("reborn_stats")||"{}");

  Object.keys(teams).forEach(team=>{
    teams[team].forEach(player=>{
      for(let i=0;i<4;i++){
        const id = `${currentMatch}_${team}_${player}_${i}`;
        const el = document.getElementById(id);
        if(el) store[id] = el.textContent;
      }
    });
  });

  localStorage.setItem("reborn_stats", JSON.stringify(store));
}

function loadStats(){
  const saved = JSON.parse(localStorage.getItem("reborn_stats")||"{}");
  Object.keys(saved).forEach(id=>{
    const el = document.getElementById(id);
    if(el) el.textContent = saved[id];
  });
}

function updateScores(){
  if(!currentMatch) return;
  const [A,B] = matchups[currentMatch];
  document.getElementById("teamA_score").textContent = sum(A);
  document.getElementById("teamB_score").textContent = sum(B);
}

function sum(team){
  let total = 0;
  teams[team].forEach(name=>{
    const el = document.getElementById(`${currentMatch}_${team}_${name}_0`);
    if(el) total += parseInt(el.textContent);
  });
  return total;
}

function exportCSV(){
  const saved = JSON.parse(localStorage.getItem("reborn_stats")||"{}");
  if(Object.keys(saved).length===0) return alert("âš  ì €ì¥ëœ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤!");

  let csv = "ê²½ê¸°,íŒ€,ì„ ìˆ˜,ë“ì ,ë¦¬ë°”ìš´ë“œ,ì–´ì‹œìŠ¤íŠ¸,íŒŒìš¸\n";

  Object.keys(matchups).forEach(m=>{
    const [A,B] = matchups[m];
    [A,B].forEach(team=>{
      teams[team].forEach(player=>{
        const arr=[];
        for(let i=0;i<4;i++){
          arr.push(saved[`${m}_${team}_${player}_${i}`] || "0");
        }
        csv += `${m},${team},${player},${arr.join(",")}\n`;
      });
    });
    csv+="\n";
  });

  const BOM = "\uFEFF";
  const blob = new Blob([BOM+csv], {type:"text/csv;charset=utf-8;"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="REBORN_ê¸°ë¡ì§€.csv";
  a.click();
}

function resetStats(){
  if(!confirm("ëª¨ë“  ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
  localStorage.removeItem("reborn_stats");
  location.reload();
}
</script>

</body>
</html>
