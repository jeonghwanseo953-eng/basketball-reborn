<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RE:BORN 3íŒ€ ë†êµ¬ ê¸°ë¡ ì‹œìŠ¤í…œ</title>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&family=Noto+Sans+KR:wght@400;500;700&display=swap');

  body {
    font-family: 'Noto Sans KR', sans-serif;
    background: #f9fafb;
    color: #222;
    margin: 0;
    padding: 15px;
  }

  h1 {
    text-align: center;
    font-family: 'Orbitron', sans-serif;
    color: #222;
    font-size: 1.8em;
    margin-bottom: 20px;
  }

  /* íƒ­ ë©”ë‰´ */
  .tabs {
    display: flex;
    justify-content: center;
    gap: 6px;
    margin-bottom: 15px;
    flex-wrap: wrap;
  }

  .tab-btn {
    padding: 8px 18px;
    cursor: pointer;
    background-color: #e9ecef;
    border: none;
    border-radius: 8px;
    color: #555;
    font-weight: 600;
    transition: all 0.2s ease;
    font-size: 15px;
  }

  .tab-btn.active {
    background-color: #007bff;
    color: white;
  }

  .tab-content { display: none; }
  .tab-content.active {
    display: block;
    animation: fadeIn 0.2s ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(5px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* 3íŒ€ UI ê°œì„ í•œ íŒ€ ì¹´ë“œ */
  .team-container {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
    padding: 10px;
    box-sizing: border-box;
  }

  @media (max-width: 900px) {
    .team-container {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 650px) {
    .team-container {
      grid-template-columns: 1fr;
    }
  }

  .team {
    background-color: #ffffff;
    border-radius: 12px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    padding: 15px;
  }

  .team h2 {
    text-align: center;
    padding: 8px 0;
    border-radius: 8px;
    font-size: 1.1em;
    color: white;
  }

  .ë ˆë“œ h2 { background-color: #d62828; }
  .í™”ì´íŠ¸ h2 { background-color: #adb5bd; }
  .ë¸”ë™ h2 { background-color: #343a40; }

  ul { list-style: none; padding: 0; margin: 0; }
  li {
    background-color: #f1f3f5;
    padding: 6px 10px;
    border-radius: 6px;
    margin: 4px 0;
  }

  /* í…Œì´ë¸” */
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
    background-color: #fff;
    border-radius: 10px;
    overflow: hidden;
    font-size: 13px;
  }

  th, td {
    text-align: center;
    padding: 6px;
    border-bottom: 1px solid #dee2e6;
  }

  th {
    background-color: #e9ecef;
    color: #333;
    font-weight: 600;
  }

  td span {
    font-weight: 600;
    font-size: 14px;
  }

  /* ë²„íŠ¼ */
  .plus, .minus {
    border: none;
    border-radius: 6px;
    padding: 6px 10px;
    margin: 2px;
    font-weight: 600;
    cursor: pointer;
    transition: 0.2s;
    font-size: 12px;
  }

  .plus { background-color: #28a745; color: #fff; }
  .minus { background-color: #dc3545; color: #fff; }
  .plus3 { background-color: #007bff !important; color: #fff !important; }
  .plus:hover, .minus:hover { opacity: 0.9; }

  /* ìŠ¤ì½”ì–´ë³´ë“œ */
  .scoreboard {
    display: flex;
    justify-content: space-around;
    align-items: center;
    background-color: #fff;
    border-radius: 12px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    padding: 10px;
    margin: 15px 0;
    flex-wrap: wrap;
  }

  .scoreboard h3 { margin: 0; font-size: 1.1em; }
  .score { font-size: 1.4em; font-weight: 700; color: #007bff; }

  /* ê²½ê¸° í™”ë©´ ë ˆì´ì•„ì›ƒ */
  #matchArea {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
    margin-bottom: 20px;
  }

  @media (max-width: 700px) {
    #matchArea {
      grid-template-columns: 1fr;
    }
  }

  .button-group {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    margin-top: 20px;
    margin-bottom: 40px;
    flex-wrap: wrap;
  }

  .save-btn {
    display: block;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 8px;
    font-weight: 700;
    padding: 10px 20px;
    cursor: pointer;
  }

  .guide-text {
    text-align: center;
    font-size: 14px;
    color: #444;
    background: #fff3cd;
    border: 1px solid #ffeeba;
    border-radius: 10px;
    padding: 10px 14px;
    margin: 0 auto 15px auto;
    max-width: 480px;
    line-height: 1.6;
  }

</style>
</head>
<body>

<h1>RE:BORN ë†êµ¬ ê¸°ë¡ì§€ ğŸ€</h1>

<p class="guide-text">
  ğŸ“± íƒœë¸”ë¦¿ ì‚¬ìš© ê¶Œì¥<br>
  âš ï¸ ê¸°ë¡ì€ <strong>í˜„ì¬ ê¸°ê¸°</strong>ì—ë§Œ ì €ì¥ë©ë‹ˆë‹¤<br>
  ğŸ’¾ ê²½ê¸° ì¢…ë£Œ í›„ <strong>CSV ì €ì¥</strong>ì„ ëˆŒëŸ¬ ê¸°ë¡ì„ ë³´ê´€í•˜ì„¸ìš”
</p>

<p style="text-align:center; font-size:14px; margin-top:-10px; color:#555;">
  ğŸ“… 2025ë…„ 11ì›” 18ì¼ ê²½ê¸° ê¸°ë¡
</p>
  
<!-- íƒ­ -->
<div class="tabs">
  <button class="tab-btn active" onclick="showTab('teamTab', this)">íŒ€ / ì„ ìˆ˜ì •ë³´</button>
  <button class="tab-btn" onclick="showTab('gameTab', this)">ê²½ê¸° ê¸°ë¡</button>
</div>

<!-- ===========================
     3íŒ€ íŒ€ / ì„ ìˆ˜ ì •ë³´
=========================== -->
<div id="teamTab" class="tab-content active">
  <div class="team-container">
    <div class="team ë ˆë“œ">
      <h2>ë ˆë“œ íŒ€</h2>
      <ul>
        <li>í•œê²½ì›</li><li>ê¹€ì°½ìˆ˜</li><li>ì˜¤ë¯¼í˜•</li>
        <li>ì„ë¬¸ê·œ</li><li>ì„œì •í™˜</li><li>ê¹€ì„±í˜¸</li>
      </ul>
    </div>

    <div class="team í™”ì´íŠ¸">
      <h2>í™”ì´íŠ¸ íŒ€</h2>
      <ul>
        <li>í•œì„</li><li>í™í†µì¹˜</li><li>í™©ì§€í™˜</li>
        <li>ê¶Œìš©</li><li>ì„œìœ¤ì„œ</li>
      </ul>
    </div>

    <div class="team ë¸”ë™">
      <h2>ë¸”ë™ íŒ€</h2>
      <ul>
        <li>ê°•ì¸êµ¬</li><li>ê°•ì§€ë¬¸</li><li>ì „ì„±í›ˆ</li>
        <li>ì„œë¯¼ê· </li><li>ìœ ì±„í›ˆ</li><li>í—ˆí•„ì€</li>
      </ul>
    </div>
  </div>
</div>

<!-- ===========================
     ê²½ê¸° ê¸°ë¡ íƒ­
=========================== -->
<div id="gameTab" class="tab-content">
  <center>
    <select id="matchSelect" onchange="loadMatch()">
      <option value="">-- ê²½ê¸°ë¥¼ ì„ íƒí•˜ì„¸ìš” --</option>
      <option value="game1">ë ˆë“œ vs í™”ì´íŠ¸</option>
      <option value="game2">í™”ì´íŠ¸ vs ë¸”ë™</option>
      <option value="game3">ë¸”ë™ vs ë ˆë“œ</option>
    </select>
  </center>

  <div class="scoreboard" id="scoreboard" style="display:none;">
    <div>
      <h3 id="teamA_name">TEAM A</h3>
      <div class="score" id="teamA_score">0</div>
    </div>
    <div><h3>VS</h3></div>
    <div>
      <h3 id="teamB_name">TEAM B</h3>
      <div class="score" id="teamB_score">0</div>
    </div>
  </div>

  <div id="matchArea"></div>

  <div class="button-group">
    <button class="save-btn" onclick="exportCSV()">ğŸ“¤ CSV ì €ì¥</button>
    <button class="save-btn" style="background:#dc3545;" onclick="resetStats()">ğŸ—‘ ì´ˆê¸°í™”</button>
  </div>
</div>

<script>
/* ======================
   3íŒ€ êµ¬ì„±
====================== */
const teams = {
  ë ˆë“œ: ["í•œê²½ì›","ê¹€ì°½ìˆ˜","ì˜¤ë¯¼í˜•","ì„ë¬¸ê·œ","ì„œì •í™˜","ê¹€ì„±í˜¸"],
  í™”ì´íŠ¸: ["í•œì„","í™í†µì¹˜","í™©ì§€í™˜","ê¶Œìš©","ì„œìœ¤ì„œ"],
  ë¸”ë™: ["ê°•ì¸êµ¬","ê°•ì§€ë¬¸","ì „ì„±í›ˆ","ì„œë¯¼ê· ","ìœ ì±„í›ˆ","í—ˆí•„ì€"]
};

/* ê²½ê¸° ë§¤ì¹˜ì—… */
const matchups = {
  game1: ["ë ˆë“œ","í™”ì´íŠ¸"],
  game2: ["í™”ì´íŠ¸","ë¸”ë™"],
  game3: ["ë¸”ë™","ë ˆë“œ"]
};

let currentMatch = "";

/* íƒ­ ì „í™˜ */
function showTab(id, btn) {
  document.querySelectorAll(".tab-content").forEach(t => t.classList.remove("active"));
  document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  btn.classList.add("active");
}

window.onload = () => {
  const select = document.getElementById("matchSelect");
  select.selectedIndex = 1;
  currentMatch = select.value;
  loadMatch();
};

/* ê²½ê¸° ë¡œë“œ */
function loadMatch() {
  currentMatch = document.getElementById("matchSelect").value;
  const area = document.getElementById("matchArea");
  const board = document.getElementById("scoreboard");
  area.innerHTML = "";

  if (!currentMatch) { board.style.display = "none"; return; }

  const [teamA, teamB] = matchups[currentMatch];
  document.getElementById("teamA_name").textContent = teamA;
  document.getElementById("teamB_name").textContent = teamB;
  board.style.display = "flex";

  area.appendChild(createTeamTable(teamA));
  area.appendChild(createTeamTable(teamB));

  loadStats();
  updateScores();
}

/* íŒ€ í…Œì´ë¸” ìƒì„± */
function createTeamTable(teamKey) {
  const teamDiv = document.createElement("div");
  teamDiv.className = "team " + teamKey;

  const table = document.createElement("table");
  const header = table.insertRow();
  ["ì„ ìˆ˜","ë“ì ","ë¦¬ë°”","ì–´ì‹œ","ìŠ¤í‹¸","ë¸”ë¡","í„´ì˜¤ë²„","íŒŒìš¸"]
  .forEach(h => { const th = document.createElement("th"); th.textContent = h; header.appendChild(th); });

  teams[teamKey].forEach(name => {
    const row = table.insertRow();
    const nameCell = row.insertCell(); nameCell.textContent = name;

    for (let i = 0; i < 7; i++) {
      const cell = row.insertCell();
      const span = document.createElement("span");
      span.textContent = "0";
      span.id = `${currentMatch}_${teamKey}_${name}_${i}`;
      cell.appendChild(span);
      cell.appendChild(document.createElement("br"));

      if (i === 0) {
        cell.appendChild(makeBtn("+2", () => changeStat(span, 2, teamKey)));
        cell.appendChild(makeBtn("+3", () => changeStat(span, 3, teamKey)));
        cell.appendChild(makeBtn("-1", () => changeStat(span, -1, teamKey)));
      } else {
        cell.appendChild(makeBtn("+", () => changeStat(span, 1, teamKey)));
        cell.appendChild(makeBtn("-", () => changeStat(span, -1, teamKey)));
      }
    }
  });

  teamDiv.appendChild(table);
  return teamDiv;
}

function makeBtn(text, fn) {
  const b = document.createElement("button");
  b.textContent = text;
  b.className = text.includes("-") ? "minus" : "plus";
  if (text === "+3") b.classList.add("plus3");
  b.onclick = fn;
  return b;
}

function changeStat(el, val) {
  let num = parseInt(el.textContent);
  num = Math.max(0, num + val);
  el.textContent = num;
  saveStats();
  updateScores();
}

/* ì €ì¥ */
function saveStats() {
  if (!currentMatch) return;
  let existing = JSON.parse(localStorage.getItem("reborn_stats") || "{}");

  Object.keys(teams).forEach(team => {
    teams[team].forEach(player => {
      for (let i = 0; i < 7; i++) {
        const el = document.getElementById(`${currentMatch}_${team}_${player}_${i}`);
        if (el) existing[`${currentMatch}_${team}_${player}_${i}`] = el.textContent;
      }
    });
  });

  localStorage.setItem("reborn_stats", JSON.stringify(existing));
}

/* ë¡œë“œ */
function loadStats() {
  const saved = JSON.parse(localStorage.getItem("reborn_stats") || "{}");
  Object.keys(saved).forEach(id => {
    const el = document.getElementById(id);
    if (el) el.textContent = saved[id];
  });
  updateScores();
}

/* ì ìˆ˜ ê³„ì‚° */
function updateScores() {
  if (!currentMatch) return;
  const [teamA, teamB] = matchups[currentMatch];
  document.getElementById("teamA_score").textContent = sumPoints(teamA);
  document.getElementById("teamB_score").textContent = sumPoints(teamB);
}

function sumPoints(teamKey) {
  let total = 0;
  teams[teamKey].forEach(name => {
    const el = document.getElementById(`${currentMatch}_${teamKey}_${name}_0`);
    if (el) total += parseInt(el.textContent);
  });
  return total;
}

/* CSV ì €ì¥ */
function exportCSV() {
  let saved = JSON.parse(localStorage.getItem("reborn_stats") || "{}");
  if (Object.keys(saved).length === 0) return alert("âš  ì €ì¥ëœ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤!");

  let csv = "ê²½ê¸°,íŒ€,ì„ ìˆ˜,ë“ì ,ë¦¬ë°”ìš´ë“œ,ì–´ì‹œìŠ¤íŠ¸,ìŠ¤í‹¸,ë¸”ë¡,í„´ì˜¤ë²„,íŒŒìš¸\n";

  Object.keys(matchups).forEach(matchKey => {
    const [teamA, teamB] = matchups[matchKey];
    [teamA, teamB].forEach(teamKey => {
      teams[teamKey].forEach(name => {
        const stats = [];
        for (let i = 0; i < 7; i++) {
          const id = `${matchKey}_${teamKey}_${name}_${i}`;
          stats.push(saved[id] || "0");
        }
        csv += `${matchKey},${teamKey},${name},${stats.join(",")}\n`;
      });
    });
    csv += "\n";
  });

  const BOM = "\uFEFF";
  const blob = new Blob([BOM + csv], { type: "text/csv;charset=utf-8;" });
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "REBORN_3íŒ€_ê¸°ë¡.csv";
  a.click();
}

/* ì´ˆê¸°í™” */
function resetStats() {
  if (!confirm("ëª¨ë“  ê¸°ë¡ì„ ì‚­ì œí•©ë‹ˆë‹¤. ê³„ì†í• ê¹Œìš”?")) return;
  localStorage.removeItem("reborn_stats");
  alert("ì´ˆê¸°í™” ì™„ë£Œ!");
  location.reload();
}
</script>

</body>
</html>

