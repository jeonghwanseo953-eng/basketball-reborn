<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ë¦¬ë³¸ ë†êµ¬ ê¸°ë¡ ì‹œìŠ¤í…œ</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&family=Noto+Sans+KR:wght@400;500;700&display=swap');

  body {
    font-family: 'Noto Sans KR', sans-serif;
    background: #f9fafb;
    color: #222;
    margin: 0;
    padding: 15px;
  }

  h1 {
    text-align: center;
    font-family: 'Orbitron', sans-serif;
    color: #222;
    font-size: 1.8em;
    margin-bottom: 20px;
  }

  /* íƒ­ ìŠ¤íƒ€ì¼ */
  .tabs {
    display: flex;
    justify-content: center;
    gap: 6px;
    margin-bottom: 15px;
    flex-wrap: wrap;
  }

  .tab-btn {
    padding: 8px 18px;
    cursor: pointer;
    background-color: #e9ecef;
    border: none;
    border-radius: 8px;
    color: #555;
    font-weight: 600;
    transition: all 0.2s ease;
    font-size: 15px;
  }

  .tab-btn.active {
    background-color: #007bff;
    color: white;
  }

  .tab-content { display: none; }
  .tab-content.active {
    display: block;
    animation: fadeIn 0.2s ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(5px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* íŒ€ ì¹´ë“œ */
  .team {
    background-color: #ffffff;
    border-radius: 12px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    padding: 15px;
    box-sizing: border-box;
  }

  .team h2 {
    text-align: center;
    padding: 8px 0;
    border-radius: 8px;
    font-size: 1.1em;
    color: white;
  }

  .white h2 { background-color: #adb5bd; }
  .black h2 { background-color: #343a40; }

  ul { list-style: none; padding: 0; margin: 0; }
  li {
    background-color: #f1f3f5;
    padding: 6px 10px;
    border-radius: 6px;
    margin: 4px 0;
  }

  /* âœ… íŒ€ ì»¨í…Œì´ë„ˆ - ê°€ë¡œ ì •ë ¬ ê³ ì • */
  .team-container {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    gap: 20px;
    flex-wrap: nowrap;   /* ì¤„ë°”ê¿ˆ ê¸ˆì§€ */
    padding: 10px 0;
    overflow-x: auto;    /* ëª¨ë°”ì¼ ìŠ¤í¬ë¡¤ ëŒ€ì‘ */
  }

  .team-container .team {
    flex: 1;
    max-width: 500px;
  }

  /* í…Œì´ë¸” */
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
    background-color: #fff;
    border-radius: 10px;
    overflow: hidden;
    font-size: 14px;
  }

  th, td {
    text-align: center;
    padding: 6px;
    border-bottom: 1px solid #dee2e6;
  }

  th {
    background-color: #e9ecef;
    color: #333;
    font-weight: 600;
  }

  td span {
    font-weight: 600;
    font-size: 15px;
  }

  /* ë²„íŠ¼ */
  .plus, .minus {
    border: none;
    border-radius: 6px;
    padding: 10px 16px;
    margin: 2px;
    font-weight: 600;
    cursor: pointer;
    transition: 0.2s;
    font-size: 14px;
  }

  .plus { background-color: #28a745; color: #fff; }
  .minus { background-color: #dc3545; color: #fff; }
  .plus:hover, .minus:hover { opacity: 0.9; }
  .plus3 { background-color: #007bff !important; color: #fff !important; }

  select {
    font-size: 15px;
    padding: 8px;
    border-radius: 6px;
    border: 1px solid #ccc;
    margin: 10px auto;
  }

  /* ì €ì¥ ë²„íŠ¼ */
  .save-btn {
    display: block;
    margin: 20px auto 40px auto;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 8px;
    font-weight: 700;
    padding: 10px 20px;
    cursor: pointer;
  }

  /* ìŠ¤ì½”ì–´ë³´ë“œ */
  .scoreboard {
    display: flex;
    justify-content: space-around;
    align-items: center;
    background-color: #fff;
    border-radius: 12px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    padding: 10px;
    margin: 15px 0;
  }

  .scoreboard h3 { margin: 0; font-size: 1.2em; }
  .scoreboard .score { font-size: 1.5em; font-weight: 700; color: #007bff; }

  /* ê²½ê¸° ê¸°ë¡ ë ˆì´ì•„ì›ƒ */
  #matchArea {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 10px;
    flex-wrap: wrap;
    overflow: visible;
    margin-bottom: 20px;
  }

  #matchArea .team {
    flex: 1 1 48%;
    max-width: 48%;
  }

  #matchArea table { font-size: 12px; }
  #matchArea th, #matchArea td { padding: 4px; }
  #matchArea .plus, #matchArea .minus {
    padding: 4px 8px;
    font-size: 11px;
    margin: 1px;
  }
  .button-group {
  display: flex;
  justify-content: center;  /* ê°€ìš´ë° ì •ë ¬ */
  align-items: center;
  gap: 10px;                /* ë²„íŠ¼ ê°„ ê°„ê²© */
  margin-top: 20px;
  margin-bottom: 40px;
  flex-wrap: wrap;          /* ì‘ì€ í™”ë©´ì—ì„œ ì¤„ë°”ê¿ˆ */
}

.button-group .save-btn {
  margin: 0; /* ê¸°ì¡´ì˜ margin ì œê±° */
}
</style>
</head>
<body>
  <h1>RE:BORN ê¸°ë¡ì§€ ğŸ€</h1>

  <div class="tabs">
    <button class="tab-btn active" onclick="showTab('teamTab', this)">íŒ€ / ì„ ìˆ˜ì •ë³´</button>
    <button class="tab-btn" onclick="showTab('gameTab', this)">ê²½ê¸° ê¸°ë¡</button>
  </div>

  <!-- íŒ€ / ì„ ìˆ˜ì •ë³´ -->
<div id="teamTab" class="tab-content active">
  <div class="team-container">
    <div class="team white">
      <h2>í™”ì´íŠ¸ íŒ€</h2>
      <ul>
        <li>ê³½í˜¸ìŠ¹</li>
        <li>ê¹€ì°½ìˆ˜</li>
        <li>ì„œìœ¤ì„œ</li>
        <li>ì„œì •í™˜</li>
        <li>ì˜¤ë¯¼í˜•</li>
        <li>ì„ë¬¸ê·œ</li>
        <li>í•œê²½ì›</li>
      </ul>
    </div>
    <div class="team black">
      <h2>ë¸”ë™ íŒ€</h2>
      <ul>
        <li>ê°•ì¸êµ¬</li>
        <li>ê¶Œìš©</li>
        <li>ì„œë¯¼ê· </li>
        <li>ìœ ì±„í›ˆ</li>
        <li>ì „ì„±í›ˆ</li>
        <li>ì •ì§€í•™</li>
        <li>í™í†µì¹˜</li>
        <li>í™©ì§€í™˜</li>
      </ul>
    </div>
  </div>
</div>


  <!-- ê²½ê¸° ê¸°ë¡ -->
  <div id="gameTab" class="tab-content">
    <center>
      <select id="matchSelect" onchange="loadMatch()">
        <option value="">-- ê²½ê¸°ë¥¼ ì„ íƒí•˜ì„¸ìš” --</option>
        <option value="game1">ë¸”ë™ vs í™”ì´íŠ¸ (1ê²½ê¸°)</option>
        <option value="game2">ë¸”ë™ vs í™”ì´íŠ¸ (2ê²½ê¸°)</option>
        <option value="game3">ë¸”ë™ vs í™”ì´íŠ¸ (3ê²½ê¸°)</option>
      </select>
    </center>

    <div class="scoreboard" id="scoreboard" style="display:none;">
      <div><h3 id="teamA_name">TEAM A</h3><div class="score" id="teamA_score">0</div></div>
      <div><h3>VS</h3></div>
      <div><h3 id="teamB_name">TEAM B</h3><div class="score" id="teamB_score">0</div></div>
    </div>

    <div id="matchArea"></div>
<div class="button-group">
  <button class="save-btn" onclick="exportCSV()">ğŸ“¤ ê¸°ë¡ ì €ì¥ (CSV)</button>
  <button class="save-btn" style="background:#dc3545;" onclick="resetStats()">ğŸ—‘ï¸ ê¸°ë¡ ì´ˆê¸°í™”</button>
  <button class="save-btn" style="background:#6c757d;" onclick="testInsert()">í…ŒìŠ¤íŠ¸ ê°’ ë„£ê¸°</button>
</div>

  </div>

<script>
const teams = {
  í™”ì´íŠ¸: ["ê³½í˜¸ìŠ¹","ê¹€ì°½ìˆ˜","ì„œìœ¤ì„œ","ì„œì •í™˜","ì˜¤ë¯¼í˜•","ì„ë¬¸ê·œ","í•œê²½ì›"],
  ë¸”ë™: ["ê°•ì¸êµ¬","ê¶Œìš©","ì„œë¯¼ê· ","ìœ ì±„í›ˆ","ì „ì„±í›ˆ","ì •ì§€í•™","í™í†µì¹˜","í™©ì§€í™˜"]
};

const matchups = {
  game1: ["ë¸”ë™","í™”ì´íŠ¸"],
  game2: ["ë¸”ë™","í™”ì´íŠ¸"],
  game3: ["ë¸”ë™","í™”ì´íŠ¸"]
};

let currentMatch = "";

function showTab(id, btn) {
  document.querySelectorAll(".tab-content").forEach(t => t.classList.remove("active"));
  document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  btn.classList.add("active");
}

window.onload = () => {
  const select = document.getElementById("matchSelect");
  select.selectedIndex = 1; // ì²« ë²ˆì§¸ ê²½ê¸° ì„ íƒ
  currentMatch = select.value;
  loadMatch();

  // ğŸ”½ ìƒˆë¡œê³ ì¹¨ í›„ ê²½ê¸°ê¸°ë¡ íƒ­ ìë™ í‘œì‹œ
  if (localStorage.getItem("showGameTabAfterReload") === "true") {
    localStorage.removeItem("showGameTabAfterReload");
    document.querySelector(".tab-btn[onclick*='gameTab']").click();
  }
};


function loadMatch() {
  currentMatch = document.getElementById("matchSelect").value;
  const area = document.getElementById("matchArea");
  const board = document.getElementById("scoreboard");
  area.innerHTML = "";
  if (!currentMatch) { board.style.display = "none"; return; }

  const [teamA, teamB] = matchups[currentMatch];
  document.getElementById("teamA_name").textContent = teamA.toUpperCase();
  document.getElementById("teamB_name").textContent = teamB.toUpperCase();
  board.style.display = "flex";
  area.appendChild(createTeamTable(teamA));
  area.appendChild(createTeamTable(teamB));
  loadStats();
  updateScores();
}

function createTeamTable(teamKey) {
  const teamDiv = document.createElement("div");
  teamDiv.className = "team " + teamKey;

  const table = document.createElement("table");
  const header = table.insertRow();
  ["ì„ ìˆ˜","ë“ì ","ë¦¬ë°”ìš´ë“œ","ì–´ì‹œ","ìŠ¤í‹¸","ë¸”ë¡","í„´ì˜¤ë²„","íŒŒìš¸"].forEach(h => {
    const th = document.createElement("th"); th.textContent = h; header.appendChild(th);
  });

  teams[teamKey].forEach(name => {
    const row = table.insertRow();
    const nameCell = row.insertCell(); nameCell.textContent = name;
    for (let i = 0; i < 7; i++) {
      const cell = row.insertCell();
      const span = document.createElement("span");
      span.textContent = "0";
      span.id = `${currentMatch}_${teamKey}_${name}_${i}`;
      cell.appendChild(span);
      cell.appendChild(document.createElement("br"));
      if (i === 0) {
        cell.appendChild(makeBtn("+2", () => changeStat(span, 2, teamKey)));
        cell.appendChild(makeBtn("+3", () => changeStat(span, 3, teamKey)));
        cell.appendChild(makeBtn("-1", () => changeStat(span, -1, teamKey)));
      } else {
        cell.appendChild(makeBtn("+", () => changeStat(span, 1, teamKey)));
        cell.appendChild(makeBtn("-", () => changeStat(span, -1, teamKey)));
      }
    }
  });
  teamDiv.appendChild(table);
  return teamDiv;
}

function makeBtn(text, fn) {
  const b = document.createElement("button");
  b.textContent = text;
  b.className = text.includes("-") ? "minus" : "plus";
  if (text === "+3") b.classList.add("plus3");
  b.onclick = fn;
  return b;
}

function changeStat(el, val, teamKey) {
  let num = parseInt(el.textContent);
  num = Math.max(0, num + val);
  el.textContent = num;
  saveStats();
  updateScores();
}

function saveStats() {
  if (!currentMatch) return;
  let existing = JSON.parse(localStorage.getItem("reborn_stats") || "{}");
  Object.keys(teams).forEach(team => {
    teams[team].forEach(player => {
      for (let i = 0; i < 7; i++) {
        const el = document.getElementById(`${currentMatch}_${team}_${player}_${i}`);
        if (el) existing[`${currentMatch}_${team}_${player}_${i}`] = el.textContent;
      }
    });
  });
  localStorage.setItem("reborn_stats", JSON.stringify(existing));
}

function loadStats() {
  const saved = JSON.parse(localStorage.getItem("reborn_stats") || "{}");
  Object.keys(saved).forEach(id => {
    const el = document.getElementById(id);
    if (el) el.textContent = saved[id];
  });
  updateScores();
}

function updateScores() {
  if (!currentMatch) return;
  const [teamA, teamB] = matchups[currentMatch];
  document.getElementById("teamA_score").textContent = sumTeamPoints(teamA);
  document.getElementById("teamB_score").textContent = sumTeamPoints(teamB);
}

function sumTeamPoints(teamKey) {
  let total = 0;
  teams[teamKey].forEach(name => {
    const el = document.getElementById(`${currentMatch}_${teamKey}_${name}_0`);
    if (el) total += parseInt(el.textContent);
  });
  return total;
}

function exportCSV() {
  let saved = JSON.parse(localStorage.getItem("reborn_stats") || "{}");
  if (Object.keys(saved).length === 0) return alert("âš ï¸ ì €ì¥ëœ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤!");

  let csv = "ê²½ê¸°,íŒ€,ì„ ìˆ˜,ë“ì ,ë¦¬ë°”ìš´ë“œ,ì–´ì‹œìŠ¤íŠ¸,ìŠ¤í‹¸,ë¸”ë¡,í„´ì˜¤ë²„,íŒŒìš¸\n";
  const matchNames = {
    game1: "ë¸”ë™ vs í™”ì´íŠ¸ (1ê²½ê¸°)",
    game2: "ë¸”ë™ vs í™”ì´íŠ¸ (2ê²½ê¸°)",
    game3: "ë¸”ë™ vs í™”ì´íŠ¸ (3ê²½ê¸°)"
  };

  Object.keys(matchups).forEach(matchKey => {
    const matchTitle = matchNames[matchKey] || matchKey;
    const [teamA, teamB] = matchups[matchKey];
    [teamA, teamB].forEach(teamKey => {
      teams[teamKey].forEach(name => {
        const stats = [];
        for (let i = 0; i < 7; i++) {
          const id = `${matchKey}_${teamKey}_${name}_${i}`;
          stats.push(saved[id] || "0");
        }
        csv += `${matchTitle},${teamKey},${name},${stats.join(",")}\n`;
      });
    });
    csv += "\n";
  });

  const BOM = "\uFEFF";
  const blob = new Blob([BOM + csv], { type: "text/csv;charset=utf-8;" });
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "ë¦¬ë³¸_ê¸°ë¡_ì „ì²´.csv";
  a.click();
}

function testInsert() {
  if (!confirm("âš ï¸ ëª¨ë“  ê²½ê¸°ì˜ ë°ì´í„°ë¥¼ ì„ì˜ê°’ìœ¼ë¡œ ì±„ì›ë‹ˆë‹¤. ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
  let existing = JSON.parse(localStorage.getItem("reborn_stats") || "{}");
  Object.keys(matchups).forEach(matchKey => {
    const [teamA, teamB] = matchups[matchKey];
    [teamA, teamB].forEach(teamKey => {
      teams[teamKey].forEach(name => {
        for (let i = 0; i < 7; i++) {
          let val = 0;
          switch (i) {
            case 0: val = Math.floor(Math.random() * 16); break;
            case 1: val = Math.floor(Math.random() * 10); break;
            case 2: val = Math.floor(Math.random() * 8); break;
            case 3: val = Math.floor(Math.random() * 5); break;
            case 4: val = Math.floor(Math.random() * 4); break;
            case 5: val = Math.floor(Math.random() * 5); break;
            case 6: val = Math.floor(Math.random() * 5); break;
          }
          existing[`${matchKey}_${teamKey}_${name}_${i}`] = val.toString();
        }
      });
    });
  });
  localStorage.setItem("reborn_stats", JSON.stringify(existing));
  loadStats();
  updateScores();
  alert("âœ… í…ŒìŠ¤íŠ¸ ë°ì´í„°ê°€ ëª¨ë“  ê²½ê¸° ê¸°ë¡ì— ë¬´ì‘ìœ„ë¡œ ì±„ì›Œì¡ŒìŠµë‹ˆë‹¤!");
}
function resetStats() {
  if (!confirm("âš ï¸ ëª¨ë“  ê²½ê¸°ì˜ ì €ì¥ëœ ê¸°ë¡ì„ ì™„ì „íˆ ì‚­ì œí•©ë‹ˆë‹¤. ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
  localStorage.removeItem("reborn_stats");
  alert("âœ… ëª¨ë“  ê¸°ë¡ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤!");
  // ê²½ê¸° ê¸°ë¡ íƒ­ì„ ë°”ë¡œ ë³´ì´ê²Œ í”Œë˜ê·¸ ì €ì¥
  localStorage.setItem("showGameTabAfterReload", "true");
  location.reload(); // ğŸ” ìƒˆë¡œê³ ì¹¨
}

</script>
</body>
</html>
