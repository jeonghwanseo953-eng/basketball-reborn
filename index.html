<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RE:BORN 3íŒ€ ë†êµ¬ ê¸°ë¡ ì‹œìŠ¤í…œ</title>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&family=Noto+Sans+KR:wght@400;500;700&display=swap');

  body {
    font-family: 'Noto Sans KR', sans-serif;
    background: #f9fafb;
    color: #222;
    margin: 0;
    padding: 20px;
  }

  h1 {
    text-align: center;
    font-family: 'Orbitron', sans-serif;
    color: #222;
    font-size: 2em;
    margin-bottom: 25px;
  }

  /* íƒ­ ë©”ë‰´ */
  .tabs {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin-bottom: 20px;
    flex-wrap: wrap;
  }

  .tab-btn {
    padding: 10px 20px;
    cursor: pointer;
    background-color: #e9ecef;
    border: none;
    border-radius: 8px;
    color: #555;
    font-weight: 700;
    transition: 0.2s ease;
    font-size: 16px;
  }

  .tab-btn.active {
    background-color: #007bff;
    color: white;
  }

  .tab-content { display: none; }
  .tab-content.active {
    display: block;
  }

  /* íŒ€ ë°•ìŠ¤ */
  .team-container {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 18px;
    padding: 12px;
  }

  .team {
    background: white;
    border-radius: 12px;
    padding: 15px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  }

  .team h2 {
    text-align: center;
    padding: 10px 0;
    border-radius: 8px;
    font-size: 1.3em;
    color: white;
  }

  .í™”ì´íŠ¸ h2 { background: #adb5bd; }
  .ë¸”ë™ h2 { background: #343a40; }

  ul { list-style: none; padding: 0; margin: 0; }
  li {
    background: #f1f3f5;
    margin: 6px 0;
    padding: 10px;
    font-size: 1.05em;
    border-radius: 6px;
    font-weight: 600;
  }

  /* í…Œì´ë¸” */
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 12px;
    background: white;
    border-radius: 12px;
    overflow: hidden;
    font-size: 15px;
  }

  th, td {
    text-align: center;
    padding: 10px;
    border-bottom: 1px solid #dee2e6;
  }

  th {
    background: #e9ecef;
    font-size: 1em;
    font-weight: 700;
  }

  td span {
    font-size: 1.25em;
    font-weight: 700;
  }

  /* ë²„íŠ¼ â€” í¬ê²Œ ê°œì„  */
  button.plus, button.minus {
    border: none;
    border-radius: 12px;
    padding: 14px 22px;
    margin: 6px;
    font-size: 18px;
    font-weight: 700;
    cursor: pointer;
    transition: 0.2s;
  }

  .plus { background: #28a745; color: white; }
  .minus { background: #dc3545; color: white; }
  .plus3 { background: #007bff !important; }

  /* ê²½ê¸° */
  #matchArea {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 18px;
  }

  .scoreboard {
    margin: 20px 0;
    display: flex;
    justify-content: space-around;
    background: white;
    padding: 12px;
    border-radius: 12px;
    font-size: 1.2em;
    font-weight: 700;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  }

  .button-group {
    text-align: center;
    margin: 30px 0;
  }

  .save-btn {
    background: #007bff;
    color: white;
    border: none;
    padding: 12px 20px;
    border-radius: 10px;
    font-size: 16px;
    margin: 5px;
    cursor: pointer;
    font-weight: 700;
  }
</style>
</head>
<body>

<h1>RE:BORN ë†êµ¬ ê¸°ë¡ì§€ ğŸ€</h1>

<!-- íƒ­ -->
<div class="tabs">
  <button class="tab-btn active" onclick="showTab('teamTab', this)">íŒ€ ì •ë³´</button>
  <button class="tab-btn" onclick="showTab('gameTab', this)">ê²½ê¸° ê¸°ë¡</button>
</div>

<!-- íŒ€ íƒ­ -->
<div id="teamTab" class="tab-content active">
  <div class="team-container">

    <div class="team í™”ì´íŠ¸">
      <h2>í™”ì´íŠ¸ íŒ€</h2>
      <ul>
        <li>ê¶Œìš©</li>
        <li>ê¹€ì„±í˜¸</li>
        <li>ê¹€ì°½ìˆ˜</li>
        <li>ì„œìœ¤ì„œ</li>
        <li>ì„œì •í™˜</li>
        <li>ì˜¤ë¯¼í˜•</li>
        <li>ì„ë¬¸ê·œ</li>
        <li>í•œê²½ì›</li>
      </ul>
    </div>

    <div class="team ë¸”ë™">
      <h2>ë¸”ë™ íŒ€</h2>
      <ul>
        <li>ê°•ì¸êµ¬</li>
        <li>ê°•ì§€ë¬¸</li>
        <li>ì„œë¯¼ê· </li>
        <li>ì „ì„±í›ˆ</li>
        <li>í•œì„</li>
        <li>í™í†µì¹˜</li>
        <li>í™©ì§€í™˜</li>
      </ul>
    </div>

  </div>
</div>

<!-- ê²½ê¸° ê¸°ë¡ íƒ­ -->
<div id="gameTab" class="tab-content">
  <center>
    <select id="matchSelect" onchange="loadMatch()">
      <option value="">-- ê²½ê¸° ì„ íƒ --</option>
      <option value="game1">ë¸”ë™ vs í™”ì´íŠ¸ (1ê²½ê¸°)</option>
      <option value="game2">ë¸”ë™ vs í™”ì´íŠ¸ (2ê²½ê¸°)</option>
      <option value="game3">ë¸”ë™ vs í™”ì´íŠ¸ (3ê²½ê¸°)</option>
    </select>
  </center>

  <div id="scoreboard" class="scoreboard" style="display:none;">
    <div><span id="teamA_name"></span> : <span id="teamA_score">0</span></div>
    <div>VS</div>
    <div><span id="teamB_name"></span> : <span id="teamB_score">0</span></div>
  </div>

  <div id="matchArea"></div>

  <div class="button-group">
    <button class="save-btn" onclick="exportCSV()">CSV ì €ì¥</button>
    <button class="save-btn" style="background:#dc3545;" onclick="resetStats()">ì´ˆê¸°í™”</button>
  </div>
</div>

<script>
/* ======================
   íŒ€ êµ¬ì„±
====================== */
const teams = {
  í™”ì´íŠ¸: ["ê¶Œìš©","ê¹€ì„±í˜¸","ê¹€ì°½ìˆ˜","ì„œìœ¤ì„œ","ì„œì •í™˜","ì˜¤ë¯¼í˜•","ì„ë¬¸ê·œ","í•œê²½ì›"],
  ë¸”ë™: ["ê°•ì¸êµ¬","ê°•ì§€ë¬¸","ì„œë¯¼ê· ","ì „ì„±í›ˆ","í•œì„","í™í†µì¹˜","í™©ì§€í™˜"]
};

/* ======================
   ê²½ê¸° ë§¤ì¹­ (3ê²½ê¸°)
====================== */
const matchups = {
  game1: ["ë¸”ë™","í™”ì´íŠ¸"],
  game2: ["ë¸”ë™","í™”ì´íŠ¸"],
  game3: ["ë¸”ë™","í™”ì´íŠ¸"]
};

let currentMatch = "";

/* ======================
   íƒ­ ì „í™˜
====================== */
function showTab(id, btn) {
  document.querySelectorAll(".tab-content").forEach(t => t.classList.remove("active"));
  document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  btn.classList.add("active");
}

/* ======================
   ê²½ê¸° ë¡œë“œ
====================== */
function loadMatch() {
  currentMatch = document.getElementById("matchSelect").value;
  const area = document.getElementById("matchArea");
  const board = document.getElementById("scoreboard");
  area.innerHTML = "";

  if (!currentMatch) { board.style.display = "none"; return; }

  const [teamA, teamB] = matchups[currentMatch];

  document.getElementById("teamA_name").textContent = teamA;
  document.getElementById("teamB_name").textContent = teamB;
  board.style.display = "flex";

  area.appendChild(createTeamTable(teamA));
  area.appendChild(createTeamTable(teamB));

  loadStats();
  updateScores();
}

/* ======================
   íŒ€ í…Œì´ë¸” ìƒì„± (ìŠ¤íƒ¯ 3ê°œ)
====================== */
function createTeamTable(teamKey) {
  const teamDiv = document.createElement("div");

  const table = document.createElement("table");
  const header = table.insertRow();

  ["ì„ ìˆ˜","ë“ì ","ë¦¬ë°”","ì–´ì‹œ"].forEach(h => {
    const th = document.createElement("th");
    th.textContent = h;
    header.appendChild(th);
  });

  teams[teamKey].forEach(name => {
    const row = table.insertRow();
    const nameCell = row.insertCell();
    nameCell.innerHTML = `<b>${name}</b>`;

    for (let i = 0; i < 3; i++) {
      const cell = row.insertCell();
      const span = document.createElement("span");
      span.id = `${currentMatch}_${teamKey}_${name}_${i}`;
      span.textContent = "0";

      cell.appendChild(span);
      cell.appendChild(document.createElement("br"));

      if (i === 0) {
        cell.appendChild(makeBtn("+2", () => changeStat(span, 2)));
        cell.appendChild(makeBtn("+3", () => changeStat(span, 3)));
        cell.appendChild(makeBtn("-1", () => changeStat(span, -1)));
      } else {
        cell.appendChild(makeBtn("+", () => changeStat(span, 1)));
        cell.appendChild(makeBtn("-", () => changeStat(span, -1)));
      }
    }
  });

  teamDiv.appendChild(table);
  return teamDiv;
}

function makeBtn(text, fn) {
  const b = document.createElement("button");
  b.textContent = text;
  b.className = text.includes("-") ? "minus" : "plus";
  if (text === "+3") b.classList.add("plus3");
  b.onclick = fn;
  return b;
}

/* ======================
   ìŠ¤íƒ¯ ë³€ê²½ + ì €ì¥
====================== */
function changeStat(el, val) {
  let num = parseInt(el.textContent);
  num = Math.max(0, num + val);
  el.textContent = num;
  saveStats();
  updateScores();
}

/* ======================
   ì €ì¥
====================== */
function saveStats() {
  if (!currentMatch) return;

  let existing = JSON.parse(localStorage.getItem("reborn_stats") || "{}");

  Object.keys(teams).forEach(team => {
    teams[team].forEach(player => {
      for (let i = 0; i < 3; i++) {
        const el = document.getElementById(`${currentMatch}_${team}_${player}_${i}`);
        if (el) existing[`${currentMatch}_${team}_${player}_${i}`] = el.textContent;
      }
    });
  });

  localStorage.setItem("reborn_stats", JSON.stringify(existing));
}

/* ======================
   ë¶ˆëŸ¬ì˜¤ê¸°
====================== */
function loadStats() {
  const saved = JSON.parse(localStorage.getItem("reborn_stats") || "{}");

  Object.keys(saved).forEach(id => {
    const el = document.getElementById(id);
    if (el) el.textContent = saved[id];
  });
}

/* ======================
   ì ìˆ˜ ê³„ì‚°
====================== */
function updateScores() {
  if (!currentMatch) return;

  const [teamA, teamB] = matchups[currentMatch];
  document.getElementById("teamA_score").textContent = sumPoints(teamA);
  document.getElementById("teamB_score").textContent = sumPoints(teamB);
}

function sumPoints(teamKey) {
  let total = 0;
  teams[teamKey].forEach(name => {
    const el = document.getElementById(`${currentMatch}_${teamKey}_${name}_0`);
    if (el) total += parseInt(el.textContent);
  });
  return total;
}

/* ======================
   CSV ì €ì¥ (íŒŒìš¸ ì œê±°)
====================== */
function exportCSV() {
  let saved = JSON.parse(localStorage.getItem("reborn_stats") || "{}");
  if (Object.keys(saved).length === 0) return alert("ì €ì¥ëœ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤!");

  let csv = "ê²½ê¸°,íŒ€,ì„ ìˆ˜,ë“ì ,ë¦¬ë°”,ì–´ì‹œ\n";

  Object.keys(matchups).forEach(matchKey => {
    const [teamA, teamB] = matchups[matchKey];

    [teamA, teamB].forEach(teamKey => {
      teams[teamKey].forEach(name => {

        const stats = [];
        for (let i = 0; i < 3; i++) {
          const id = `${matchKey}_${teamKey}_${name}_${i}`;
          stats.push(saved[id] || "0");
        }

        csv += `${matchKey},${teamKey},${name},${stats.join(",")}\n`;
      });
    });

    csv += "\n";
  });

  const BOM = "\uFEFF";

  const blob = new Blob([BOM + csv], { type: "text/csv;charset=utf-8;" });
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "REBORN_ê¸°ë¡.csv";
  a.click();
}

/* ======================
   ì´ˆê¸°í™”
====================== */
function resetStats() {
  if (!confirm("ëª¨ë“  ê¸°ë¡ì„ ì‚­ì œí•©ë‹ˆë‹¤.")) return;
  localStorage.removeItem("reborn_stats");
  location.reload();
}

</script>

</body>
</html>
